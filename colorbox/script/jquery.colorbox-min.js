/*
	ColorBox v1.2.3 - a full featured, light-weight, customizable lightbox based on jQuery 1.3
	(c) 2009 Jack Moore : colorpowered.com
*/
(function(v){var j,H,A,s,F,a,d,K,f,u,b,B,E,G,o,h,z,i,g,I,J,c,n,y,e,w,k,C,p,r;function t(){y.css({position:"absolute",width:G.width(),height:G.height(),top:G.scrollTop(),left:G.scrollLeft()})}function m(){var L;function M(){E.text(H.slideshowStop).bind("cbox_complete",function(){B=setTimeout(v.fn.colorbox.next,H.slideshowSpeed)}).bind("cbox_load",function(){clearTimeout(B)}).one("click",function(){L();v(this).removeClass("hover")});I.removeClass("cboxSlideshow_off").addClass("cboxSlideshow_on")}L=function(){clearTimeout(B);E.text(H.slideshowStart).unbind("cbox_complete cbox_load").one("click",function(){M();B=setTimeout(v.fn.colorbox.next,H.slideshowSpeed);v(this).removeClass("hover")});I.removeClass("cboxSlideshow_on").addClass("cboxSlideshow_off")};if(H.slideshow&&b.length>1){if(H.slideshowAuto){M()}else{L()}}}function l(){if(v("#cboxInlineTemp").length>0){w.children().insertAfter("#cboxInlineTemp")}}function D(L){if(L.keyCode==37){L.preventDefault();z.click()}else{if(L.keyCode==39){L.preventDefault();h.click()}}}function x(L,M){M=M=="x"?document.documentElement.clientWidth:document.documentElement.clientHeight;return(typeof L=="string")?(L.match(/%/)?(M/100)*parseInt(L,10):parseInt(L,10)):L}function q(L){return H.photo?true:L.match(/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(.*))?$/i)}v(function(){v.fn.colorbox.init()});v.fn.colorbox=function(M,L){if(this.length){this.each(function(){if(v(this).data("colorbox")){v(this).data("colorbox",v.extend({},v(this).data("colorbox"),M))}else{v(this).data("colorbox",v.extend({},v.fn.colorbox.settings,M))}var N=v(this).data("colorbox");N.title=N.title?N.title:this.title;N.href=N.href?N.href:this.href;N.rel=N.rel?N.rel:this.rel;v(this).data("colorbox",N).addClass("cboxelement")})}else{v(this).data("colorbox",v.extend({},v.fn.colorbox.settings,M))}v(this).unbind("click.colorbox").bind("click.colorbox",function(N){j=this;H=v(this).data("colorbox");this.blur();A=L?L:false;if(H.rel&&H.rel!="nofollow"){b=v(".cboxelement").filter(function(){return(v(this).data("colorbox").rel==H.rel)});u=b.index(this)}else{b=v(this);u=0}if(!I.data("open")){v.event.trigger("cbox_open");o.html(H.close);y.css({opacity:H.opacity}).show();I.data("open",true);v.fn.colorbox.position(x(H.initialWidth,"x"),x(H.initialHeight,"y"),0);if(v.browser.msie&&v.browser.version<7){G.bind("resize scroll",t)}}m();v.fn.colorbox.load();if(H.overlayClose===true){y.css({cursor:"pointer"}).click(v.fn.colorbox.close)}N.preventDefault()});if(M&&M.open){v(this).triggerHandler("click.colorbox")}return this};v.fn.colorbox.element=function(){return j};v.fn.colorbox.init=function(){G=v(window);v("body").prepend(y=v('<div id="cboxOverlay" />').hide(),I=v('<div id="colorbox" />'));J=v('<div id="cboxWrapper" />').appendTo(I).append(v("<div/>").append(v('<div id="cboxTopLeft"/>'),k=v('<div id="cboxTopCenter"/>'),v('<div id="cboxTopRight"/>')),C=v('<div id="cboxMiddleLeft" />'),e=v('<div id="cboxContent" />'),p=v('<div id="cboxMiddleRight" />'),v("<div/>").append(v('<div id="cboxBottomLeft"/>'),r=v('<div id="cboxBottomCenter"/>'),v('<div id="cboxBottomRight"/>')));J.find("[id]").css({"float":"left"});e.append(w=v('<div id="cboxLoadedContent" style="width:0; height:0;" />'),c=v('<div id="cboxLoadingOverlay" />'),n=v('<div id="cboxLoadingGraphic" />'),g=v('<div id="cboxTitle" />'),i=v('<div id="cboxCurrent" />'),E=v('<div id="cboxSlideshow" />'),h=v('<div id="cboxNext" />').click(v.fn.colorbox.next),z=v('<div id="cboxPrevious" />').click(v.fn.colorbox.prev),o=v('<div id="cboxClose" />').click(v.fn.colorbox.close));e.children().addClass("hover").mouseover(function(){v(this).addClass("hover")}).mouseout(function(){v(this).removeClass("hover")}).hide();K=k.height()+r.height()+e.outerHeight(true)-e.height();f=C.width()+p.width()+e.outerWidth(true)-e.width();d=w.outerHeight(true);a=w.outerWidth(true);I.css({"padding-bottom":K,"padding-right":f}).hide();v().bind("keydown.cbox_close",function(L){if(L.keyCode==27){L.preventDefault();o.click()}});e.children().removeClass("hover")};v.fn.colorbox.next=function(){u=u<b.length-1?u+1:0;v.fn.colorbox.load()};v.fn.colorbox.prev=function(){u=u>0?u-1:b.length-1;v.fn.colorbox.load()};v.fn.colorbox.position=function(O,N,M,P){var Q=document.documentElement.clientHeight;var S=Q/2-N/2;var R=document.documentElement.clientWidth/2-O/2;if(N>Q){S-=(N-Q)}if(S<0){S=0}if(R<0){R=0}S+=G.scrollTop();R+=G.scrollLeft();O=O-f;N=N-K;J[0].style.width=J[0].style.height="9999px";function T(U){k[0].style.width=r[0].style.width=e[0].style.width=U.style.width;n[0].style.height=c[0].style.height=e[0].style.height=C[0].style.height=p[0].style.height=U.style.height}var L=(I.width()===O&&I.height()===N)?0:M;I.dequeue().animate({height:N,width:O,top:S,left:R},{duration:L,complete:function(){T(this);J[0].style.width=(O+f)+"px";J[0].style.height=(N+K)+"px";if(P){P()}if(v.browser.msie&&v.browser.version<7){t()}},step:function(){T(this)}})};v.fn.colorbox.dimensions=function(O){G.unbind("resize.cbox_resize");if(!I.data("open")){return false}var R=H.transition=="none"?0:H.speed;w.remove();w=v(O);function L(){if(H.width){return s}else{return s&&s<w.width()?s:w.width()}}function S(){if(H.height){return F}else{return F&&F<w.height()?F:w.height()}}w.hide().appendTo("body").attr({id:"cboxLoadedContent"}).css({width:L()}).css({height:S()}).prependTo(e);if(v.browser.msie&&v.browser.version<7){v("select").not(v("#colorbox select")).css({visibility:"hidden"})}if(v("#cboxPhoto").length>0&&H.height){var N=(w.height()-parseInt(v("#cboxPhoto")[0].style.height,10))/2;v("#cboxPhoto").css({marginTop:(N>0?N:0)})}function M(U){var T=w.width()+a+f;var V=w.height()+d+K;v.fn.colorbox.position(T,V,U,function(){if(!I.data("open")){return false}if(v.browser.msie){if(v("#cboxPhoto").length>0){w.fadeIn(100)}I.css("filter","")}e.children().show();c.hide();n.hide();E.hide();if(b.length>1){i.html(H.current.replace(/\{current\}/,u+1).replace(/\{total\}/,b.length));h.html(H.next);z.html(H.previous);v().unbind("keydown",D).one("keydown",D);if(H.slideshow){E.show()}}else{i.add(h).add(z).hide()}g.html(H.title);v("#cboxIframe").attr("src",v("#cboxIframe").attr("src"));v.event.trigger("cbox_complete");if(A){v(j).each(A)}if(H.transition==="fade"){I.fadeTo(R,1,function(){if(v.browser.msie){I.css("filter","")}})}G.bind("resize.cbox_resize",function(){v.fn.colorbox.position(T,V,0)});return true})}if(H.transition=="fade"){I.fadeTo(R,0,function(){M(0)})}else{M(R)}if(H.preloading&&b.length>1){var Q=u>0?b[u-1]:b[b.length-1];var P=u<b.length-1?b[u+1]:b[0];if(q(v(P).data("colorbox").href)){v("<img />").attr("src",P)}if(q(v(Q).data("colorbox").href)){v("<img />").attr("src",Q)}}return true};v.fn.colorbox.load=function(){v.event.trigger("cbox_load");j=b[u];H=v(j).data("colorbox");c.show();n.show();o.show();l();var L=H.height?x(H.height,"y")-d-K:false;var O=H.width?x(H.width,"x")-a-f:false;if(H.maxHeight){F=H.maxHeight?x(H.maxHeight,"y")-d-K:false;L=L&&L<F?L:F}if(H.maxWidth){s=H.maxWidth?x(H.maxWidth,"x")-a-f:false;O=O&&O<s?O:s}F=L;s=O;var M=H.href;if(H.inline){v('<div id="cboxInlineTemp" />').hide().insertBefore(v(M)[0]);v.fn.colorbox.dimensions(v(M).wrapAll("<div/>").parent())}else{if(H.iframe){v.fn.colorbox.dimensions(v("<div><iframe id='cboxIframe' name='iframe_"+new Date().getTime()+"' frameborder=0 src='"+M+"' /></div>"))}else{if(q(M)){var N=new Image();N.onload=function(){N.onload=null;if((F||s)&&H.resize){var R=this.width;var P=this.height;var T=0;var S=this;var Q=function(){P+=P*T;R+=R*T;S.height=P;S.width=R};if(s&&R>s){T=(s-R)/R;Q()}if(F&&P>F){T=(F-P)/P;Q()}}v.fn.colorbox.dimensions(v("<div />").css({width:this.width,height:this.height}).append(v(this).css({width:this.width,height:this.height,display:"block",margin:"auto",border:0}).attr("id","cboxPhoto")));if(b.length>1){v(this).css({cursor:"pointer"}).click(v.fn.colorbox.next)}if(v.browser.msie&&v.browser.version==7){this.style.msInterpolationMode="bicubic"}};N.src=M}else{v("<div />").load(M,function(P,Q){if(Q=="success"){v.fn.colorbox.dimensions(v(this))}else{v.fn.colorbox.dimensions(v("<p>Request unsuccessful.</p>"))}})}}}};v.fn.colorbox.close=function(){clearTimeout(B);G.unbind("resize.cbox_resize");E.unbind("cbox_complete cbox_load click");l();y.css({cursor:"auto"}).fadeOut("fast").unbind("click",v.fn.colorbox.close);v().unbind("keydown",D);if(v.browser.msie&&v.browser.version<7){v("select").css({visibility:"inherit"});G.unbind("resize scroll",t)}e.children().hide();I.stop(true,false).removeClass().fadeOut("fast",function(){w.remove();I.removeData("open").css({opacity:1});v.event.trigger("cbox_closed")})};v.fn.colorbox.settings={transition:"elastic",speed:350,width:false,height:false,initialWidth:"400",initialHeight:"400",maxWidth:false,maxHeight:false,resize:true,inline:false,iframe:false,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,overlayClose:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow"}})(jQuery);